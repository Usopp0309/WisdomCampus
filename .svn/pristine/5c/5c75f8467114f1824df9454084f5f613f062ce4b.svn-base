package com.guotop.palmschool.service;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.guotop.palmschool.entity.User;
import com.guotop.palmschool.entity.UserCard;
import com.guotop.palmschool.rest.entity.UserAuthorization;
import com.guotop.palmschool.rest.entity.UserInfoDetail;

/**
 * 用户相关类接口
 * @author zhou
 *
 */
public interface UserService 
{
	/**
	 * 登陆获取用户,多用户对应单手机号
	 * @param userName 用户名(即手机号)
 	 * @param password 密码
	 * @return 登陆成功后的用户列表，可能对应单用户多权限
	 */
	public List<User> doLogin(String userName, String password);
	
	/**
	 * 添加userbase For 福建资源云
	 * @param user
	 * @return
	 */
	public Integer addUserBaseForFJ(User user);
	/**
	 * 添加userDetail For 福建资源云
	 * @param user
	 * @return
	 */
	public void addUserDetailForFJ(User user);
	
	/**
	 * 根据uuserId查询用户
	 * @param uuserId
	 * @return
	 */
	public User getUserByUUserId(String uuserId);
	
	/**
	 * 根据用户code获取用户card信息
	 * @param code
	 * @return UserCard 用户卡信息
	 */
	public UserCard selectUserCardByHomeId(String code);
	
	/**
	 * 检查密码是否存在
	 * @param oldPassword 待查询密码
	 * @param userList 存在session中的用户集合
	 * @return true:存在
	 * 		   false:不存在
	 */
	public boolean checkPasswordExist(String oldPassword, String userId);
	/**
	 * 修改密码
	 * 
	 * */
	public Integer modifyPassword(String oldPassword,String newPassword, String userId);
	
	/**
	 * 修改密码【福建专用】
	 * 
	 * */
	public Integer modifyPasswordFj(String oldPassword,String newPassword, String userId);
	
	/**
	 * @param userName 用户名
	 * @return List<User> 查找到的用户列表
	 */
	public List<User> getUserListByUserName(String userName);
	
	/**
	 * 根据userId查找到电子卡Id
	 * @param code 电子卡code
	 * @return 
	 */
	public UserCard selectCardIdByUserId(Integer userId);
	

	/**
	 * 获取所有互信ID为空的用户
	 * @return
	 */
	public List<User> getAllUsersWithHxIdIsNull();
	/**
	 * 根据ID更新互信ID
	 */
	public void modifyHxIdById(String huxinId,Integer id);
	/**
	 * 根据用户ID获取互信ID
	 * @param userId 用户ID
	 * @return
	 */
	public String getHxIdById(Integer userId);
	
	/**
	 * 根据互信ID查找该互信ID能看到的所有教师(app接口)
	 * @param huxinId 互信ID
	 */
	public List<User> selectTeacherListByRole(Map<String, Object> paramMap, User user);
	/**
	 * 添加用户
	 * @param user
	 */
	public void addUser(User user);
	
	/**
	 * 根据用户ID获取班级ID
	 * @param userId
	 * @return
	 */
	public String getClazzIdByUserId(Integer userId);
	
	/**
	 * 根据apiKey查找用户
	 * 
	 * @param apiKey
	 * @return User apiKey对于的用户
	 * update syj 20151210
	 */
	public List<User> getUserByApiKey(String apiKey);
	
	public List<User> getUserByUserId(Integer userId);
	
	public List<User> getUserByUserIdForFJ(Integer userId);
	
	
	/**
	 * 找userId绑定的智慧校园用户的userId
	 * @param userId
	 * @return
	 */
	public Integer getPalmUserIdbyUserId(Integer userId);
	
	/**
	 * 删除亦信用户与智慧校园用户绑定关系
	 * @param userId
	 */
	public void delBindPalmUserbyUserId(Integer userId);
	
	/**
	 * 通过智慧校园的userId找到对应亦信用户的userId,baiduChannalId,deviceType
	 * @param userId
	 * @return
	 */
	public List<User> getYIXINUserDetailListbyUserId(Integer userId);
	
	public User getUserByApiKeyAndSchoolId(String apiKey,String schoolId);
	/**
	 * 将roleCode permissionCode 设置到user中
	 * @param userList
	 * 
	 * update syj 20151210
	 */
	public User setRoleAndPermissionToUser(User user);
	
	/**
	 * 根据apiKey查找该apiKey能看到的所有学生(app接口)
	 * 
	 * update syj 20151211
	 */
	public List<User> selectStudentListByRole(Map<String, Object> paramMap, User user);
	/**
	 * 根据学校ID与用户ID判断是否为学校管理员
	 * @param schoolId
	 * @param userId
	 */
	public boolean isManagerBySchoolIdAndUserId(long schoolId, Integer userId);
	
	/**
	 * 根据学校ID与用户ID判断是否为学校管理员 FOR 福建
	 * @param schoolId
	 * @param userId
	 */
	public boolean isManagerBySchoolIdAndUserIdForFJ(long schoolId, Integer userId);
	/**
	 * 根据用户ID获取用户名称（名称为真实姓名+工号或学号)
	 * @param userId
	 * @return
	 */
	public String getUserNameByUserId(Integer userId);
	/**
	 * 根据学校ID获取学校所有人员ID
	 * @param schoolId
	 * @return
	 */
	public List<User> getUserIdListBySchoolId(Long schoolId);
	/**
	 * 根据用户id获取用户uuserid
	 * @param userId
	 * @return
	 */
	public String getUuserIdByUserId(int userId);
	
	/**
	 * 根据clazzId 获取班主任信息
	 * @param clazzId
	 * @return
	 * 20160122 syj
	 */
	public User getClazzLeaderByClazzIdInRICHBOOK(Integer clazzId);
	/**
	 * 根据用户ID获取用户VoipAccount
	 * @param userId
	 * @return
	 */
	public String getVoipAccountByUserId(Integer userId);
	/**
	 * 根据卡号获取用户信息
	 * @param cardCode
	 * @param schoolId
	 * @return
	 */
	public User getUserInfoByCardCode(String cardCode);
	/**
	 * 添加app下载次数记录
	 */
	public void addDownLoadNum();
	/**
	 * 根据用户ID获取用户绑定的号码
	 * @param userId
	 * @return
	 */
	public List<String> getPhonesByUserId(Integer userId);
	/**
	 * 获取学校有卡的人员列表
	 * @param schoolId
	 * @return
	 */
	public List<User> getUserNameAndCardCodeList();
	
	/**
	 * 获取student_parent的主键
	 * @return
	 */
	public Integer getIdByStudentIdAndParentId(Integer cardId,Integer loginId);
	
	/**
	 * 获取学校所有家长
	 */
	public List<User> getAllParentList();
	
	/**
	 * 获取学校所有教职工
	 */
	public List<User> getAllTeacher();
	
	/**
	 * 根据班级Id获取对应的所有家长
	 */
	public List<User> getAllParentListByClazz(Integer clazzId);
	
	/**
	 * 根据年级Id获取对应的所有家长
	 */
	public List<User> getAllParentListByGradeId(Integer gradeId);

	public List<User> getTypeByUserId(String userId);
	/**
	 * 修改用户时判断手机号是否存在
	 * @param param
	 * @return
	 */
	public boolean isExistUserByPhoneAndUserId(HashMap<String,Object> param);
	
	/**
	 * 查询系统管理员的信息
	 * @return
	 */
	public User getSysAdmin();
	
	/**
	 * 更新userbase 中的palmUserName为手机号 和source为1智慧校园用户
	 */
	public void updateUserBase(HashMap<String, Object> paramMap);
	
	/**
	 * 更新userdetail 中的code
	 * 参数1 ： code
	 * 参数2 ： userId
	 */
	public void updateUserDetail(HashMap<String, Object> paramMap);
	
	/**
	 * 根据apikey查询亦信用户信息
	 * @param apiKey
	 * @return
	 */
	public User getHuxinUserByApiKey(String apiKey);
	
	/**
	 * 根据phone获取user
	 * @param phone
	 * @return
	 */
	public List<User> getCASUserByPhone(String phone);
	
	/**
	 * 根据name获取user
	 * @param phone
	 * @return
	 */
	public List<User> getCASUserByName(String name);
	
	/**
	 * 根据personid获取福建资源云用户信息
	 * @param phone
	 * @return
	 */
	public UserInfoDetail getFJUserDetailByPersonid(String personid);
	
	public User getUserDetailByUserIdInPersonCenter(Integer userId);
	
	/**
	 * 根据personid获取
	 * @param personid
	 * @return
	 */
	public UserAuthorization getUserAuthorizationByPersonidForFJ(String personid);
	
	/**
	 * 根据userId获取
	 * @param personid
	 * @return
	 */
	public UserAuthorization getUserAuthorizationByUserId(String personid);
	/**
	 * 添加福建用户授权表
	 * @param ua
	 */
	public void addUserAuthForFJ(UserAuthorization ua);
	/**
	 * 更新福建用户授权表
	 * @param ua
	 */
	public void updateUserAuthForFJ(UserAuthorization ua);
	/**
	 * 获得一键购买短信的家长
	  @author chenyong
	  @date 2016年11月2日 下午3:53:20
	 * @param schoolId
	 * @return
	 */
	public List<User> getAutoBySmsUser(Map<String,String> map);
	
	/**
	 * 获取所有未购买服务费的学生家长
	 * @param schoolId
	 * @return
	 */
	public ArrayList<User> getNotPurchaseParentList(String schoolId);
	/**
	 * 根据部门IdList获取对应的教师
	 * @param departmentIdList
	 * @return
	 */
	public List<User> getTeacherListByDepartmentIdList(List<Integer> departmentIdList);
}
