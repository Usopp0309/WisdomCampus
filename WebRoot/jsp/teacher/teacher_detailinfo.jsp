<%@ page language="java" contentType="text/html; charset=UTF-8"  pageEncoding="UTF-8"%>
<%@ include file="/basepath.jsp"%>

<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

<!-- BEGIN HEAD -->

<head>

	<title>发送信息</title>

	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<meta content="" name="description" />

	<meta content="" name="author" />

	<!-- BEGIN GLOBAL MANDATORY STYLES -->

	<link href="../media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/style-metro.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/style.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/style-responsive.css" rel="stylesheet" type="text/css"/>

	<link href="../media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>

	<link href="../media/css/uniform.default.css" rel="stylesheet" type="text/css"/>

	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL STYLES -->

	<link href="../media/css/pricing-tables.css" rel="stylesheet" type="text/css"/>
	
	<link href="../media/css/bootstrap-modal.css" rel="stylesheet" type="text/css"/>

	<!-- END PAGE LEVEL STYLES -->

	<link rel="stylesheet" type="text/css" href="../media/css/select2_metro.css" />

	<link rel="stylesheet" href="../media/css/DT_bootstrap.css" />
	
	<link rel="stylesheet" href="../media/css/news.css" />
	
	<!-- END PAGE LEVEL STYLES -->

	<link rel="shortcut icon" href="../media/image/favicon.ico" />
	
	

</head>

<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class="page-header-fixed">


	<!-- BEGIN CONTAINER -->
		<!-- BEGIN PAGE -->

		<div class="page-content">


			<!-- BEGIN PAGE CONTAINER-->        

			<div class="container-fluid">

				<!-- BEGIN PAGE HEADER-->

				<div class="row-fluid">

					<div class="span12">

						<!-- BEGIN PAGE TITLE & BREADCRUMB-->
						<ul class="breadcrumb">

							<li>

								<i class="icon-home"></i>

								<a href="#">首页</a> 

								<i class="icon-angle-right"></i>

							</li>

							<li>

								<a href="#">师生信息</a>
								<i class="icon-angle-right"></i>
							</li>
							
							<li>

								<a href="#">教师信息</a>
							</li>

						</ul>

						<!-- END PAGE TITLE & BREADCRUMB-->

					</div>

				</div>

				<!-- END PAGE HEADER-->

				<!-- BEGIN PAGE CONTENT-->

				<div class="row-fluid">

					<div class="span12">
						
						<div class="tabbable tabbable-custom boxless">
						
							<div class="tab-content">
								
								<div class="tab-pane active" id="tab_4">

									<div class="portlet box blue">
			
										<div class="portlet-title">
											<div class="caption"><i class="icon-user"></i>教师信息</div>

										</div>
										
										<div class="portlet-body form">
											
											<div class="form-horizontal form-view">

												<h3> 个人档案 - <span id="titleName"></span> </h3>

												<h4 class="form-section">基本信息</h4>

												<div class="row-fluid">

													<div class="span6 ">
														
														<!-- 嵌套 -->
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">姓名:</label>
		
																	<div class="controls">
		
																		<span class="text" id="name"></span>
		
																	</div>
		
																</div>
															</div>
														</div>
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">工号:</label>
		
																	<div class="controls">
		
																		<span class="text" id="code"></span>
		
																	</div>
		
																</div>
															</div>
														</div>
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">出生年月:</label>
		
																	<div class="controls">
		
																		<span class="text" id="birth"></span>
		
																	</div>
		
																</div>
															</div>
														</div>
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">性别:</label>
		
																	<div class="controls">
		
																		<span class="text" id="sex"></span>
		
																	</div>
		
																</div>
															</div>
														</div>
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">班级:</label>
		
																	<div class="controls">
		
																		<span class="text" id="clazzName"></span>
		
																	</div>
		
																</div>
															</div>
														</div>
														
														<div class="row-fluid">

															<div class="span6 ">
																<div class="control-group">
		
																	<label class="control-label" for="firstName">年级:</label>
		
																	<div class="controls">
		
																		<span class="text" id="gradeName"></span>
		
																	</div>
		
																</div>
															</div>
														</div>

													</div>

													<!--/span-->

													<div class="span2 ">

														<div class="control-group">
																											
                                                            <%--<img id=image src="../media/image/profile-img.png" alt="" /> <a href="#" class="profile-edit"></a>--%>
															<img id="image" src="http://localhost:8080/WisdomCampus/pic/11.gif" alt="" /> <a href="#" class="profile-edit"></a>

														</div>

													</div>

													<!--/span-->

												</div>

												<!--/row-->

												<div class="row-fluid">

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label">担任职务:</label>

															<div class="controls" id="ofJob">


															</div>

														</div>

													</div>

													<!--/span-->

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >政治面貌:</label>

															<div class="controls">

																<span class="text" id="forPolitical"></span>

															</div>

														</div>

													</div>

													<!--/span-->

												</div>

												<!--/row-->        

												<div class="row-fluid">

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label">籍贯:</label>

															<div class="controls">

																<span class="text" id="nativePlace"></span>

															</div>

														</div>

													</div>

													<!--/span-->

													<div class="span6">

														<div class="control-group">

															<label class="control-label" >视力:</label>

															<div class="controls">                                                

																<span class="text" id="vision"></span>

															</div>

														</div>

													</div>
												</div>	
												<div class="row-fluid">

													<div class="span6">

														<div class="control-group">

															<label class="control-label" >身高:</label>

															<div class="controls">

																<span class="text" id="height"></span>

															</div>

														</div>

													</div>

													<!--/span-->

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >体重:</label>

															<div class="controls">                                                

																<span class="text" id="weight"></span>

															</div>

														</div>

													</div>
												</div>
												
												<div class="row-fluid">

													<!--/span-->

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >入校时间:</label>

															<div class="controls">                                                

																<span class="text" id="instime"></span>

															</div>

														</div>

													</div>
												</div>	
												<div class="row-fluid">

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >QQ:</label>

															<div class="controls">

																<span class="text" id="qq"></span>

															</div>

														</div>

													</div>

													<!--/span-->

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >邮箱:</label>

															<div class="controls">                                                

																<span class="text" id="email"></span>

															</div>

														</div>

													</div>
												</div>
												<div class="row-fluid">

													<div class="span6">

														<div class="control-group">

															<label class="control-label" >联系人:</label>

															<div class="controls">

																<span class="text bold" id="parentName"></span>

															</div>

														</div>

													</div>

													<!--/span-->

													<div class="span6">

														<div class="control-group">

															<label class="control-label" >联系电话:</label>

															<div class="controls">                                                

																<span class="text bold" id="phone"></span>

															</div>

														</div>

													</div>
												</div>
												
												<div class="row-fluid">

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" >家庭住址:</label>

															<div class="controls">

																<span class="text" id="address"></span>

															</div>

														</div>

													</div>

												</div>		
													<!--/span-->


												<!--/row-->                
			
												<h4 class="form-section">奖惩情况</h4>

												<div class="row-fluid">

													<div class="span6 ">

														<div class="control-group">

															<label class="control-label" ></label>

															<div class="controls">

																<span class="text bold" id="rewards"></span>

															</div>

														</div>

													</div>

												</div>

												
												<h4 class="form-section">平安校园</h4>

												<div class="row-fluid">

													<div class="span12 ">

														<table class="table table-bordered table-hover">

															<thead>
						
																<tr>

																	<th>卡号</th>
						
																	<th>拥有者</th>
						
																	<th>进出状态</th>
																	
																	<th>电池状态</th>
																	
																	<th>地点</th>
																	
																	<th>创建时间</th>
						
																</tr>
						
															</thead>
						
															<tbody id="inoutBody">
						
															</tbody>
						
														</table>

													</div>

												</div>
												
												<h4 class="form-section">信息平台</h4>

												<div class="row-fluid">

													<div class="span12 ">
          												<div class="portlet box light-grey">	
															<div class="portlet-title">
	
																<div class="caption"><i class="icon-reorder"></i>信息平台</div>
								
																<div class="tools">
								
																	<a onclick="window.location.href='<%=basePath%>announcement/toAnnouncementList.do'" class="btn green"><i class="icon-share"></i> 更多</a>
																	<a href="#portlet-config" data-toggle="modal" class="icon-share-alt" onclick="fun()"></a>
																	
																</div>
								
															</div>
								
															<div class="portlet-body">
								
																<div class="scroller" data-height="200px" id="announcementContent">
								
																	啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦
																</div>
								
															</div>
														</div>
													</div>

												</div>
												
												
												<h4 class="form-section">成长脚印</h4>

												<div class="row-fluid">

													<div class="span12 ">
														<div class="portlet box light-grey">	
															<div class="portlet-title ">
	
																<div class="caption"><i class="icon-reorder"></i>成长脚印</div>
								
																<div class="tools">
								
																	<a href="#portlet-config" data-toggle="modal" class="icon-share-alt" onclick="fun()"></a>
																	
																</div>
								
															</div>
								
															<div class="portlet-body">
								
																<div class="scroller" data-height="200px" id="announcementContent">
								
																	啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦
																</div>
								
															</div>
														</div>

													</div>

												</div>

											</div>	
											
										</div>
										
										
									</div>
								</div>
								
							</div>
						</div>
					</div>
				
				</div>
				<input type="hidden" value="${id}" id="teacherId">
				
				<!-- END PAGE CONTENT-->
				<div id="portlet-config" class="modal hide">
					<div class="modal-header">
						<button data-dismiss="modal" class="close" type="button"></button>
						<h3>信息平台</h3>
					</div>
					<div class="modal-body">
						<p id="test">Here will be a configuration form</p>
					</div>
				</div>
			</div>

	<!-- END CONTAINER -->

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

	<!-- BEGIN CORE PLUGINS -->
	<script src="../media/js/jquery-2.1.1.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

	<script src="../media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      

	<script src="../media/js/bootstrap.min.js" type="text/javascript"></script>

	<!--[if lt IE 9]>

	<script src="media/js/excanvas.min.js"></script>

	<script src="media/js/respond.min.js"></script>  

	<![endif]-->                    

	<script src="../media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery.blockui.min.js" type="text/javascript"></script>  

	<script src="../media/js/jquery.cookie.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery.uniform.min.js" type="text/javascript" ></script>

	<!-- END CORE PLUGINS -->

	<!-- BEGIN PAGE LEVEL PLUGINS -->

	<script type="text/javascript" src="../media/js/select2.min.js"></script>

	<script type="text/javascript" src="../media/js/jquery.dataTables.min.js"></script>

	<script type="text/javascript" src="../media/js/DT_bootstrap.js"></script>

	<!-- END PAGE LEVEL PLUGINS -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->


	<script src="../media/js/table-advanced.js"></script>       
	<script src="../media/js/app.js"></script>

	<script>

		jQuery(document).ready(function() {    

			App.init();
			var teacherId = $("#teacherId").val();
			
			//加载教师基本信息
			loadTeacherInfo(teacherId);
			//加载教师详细信息
			loadTeacherDetailInfo(teacherId);
			//加载平安校园数据
			loadInoutList(teacherId);
			
			loadTeacherOfJobDetailInfo(teacherId);
		});

		//加载老师基本信息
		function loadTeacherInfo(teacherId)
		{
			$.ajax({
				type: "post",
				url: "<%=basePath%>teacher/loadTeacherInfoForStudentDetail.do",
				data:
				{
					teacherId : teacherId
				},
		        success:function(data){
		        	var teacher = eval("(" + data + ")");
		        	//姓名(标题)
		        	$("#titleName").html(teacher[0].name);
		        	//姓名
		        	$("#name").html(teacher[0].name);
		        	//工号
		        	$("#code").html(teacher[0].code);
		        	//性别
		        	$("#sex").html(teacher[0].sex);
		        	//班级
		        	$("#clazzName").html(teacher[0].clazzName);
					//年级
		        	$("#gradeName").html(teacher[0].gradeName);
		        	//联系人
		        	if(null == teacher[0].parentname)
		        	{
		        	    $("#parentName").html(teacher[0].name);
		        	}
		        	else
		        	{
		        	    $("#parentName").html(teacher[0].parentname)
		        	}
		        	
		        	//联系电话
		        	$("#phone").html(teacher[0].username);
		        }
			});
		}
        
        //加载教师的职务,年级或部门信息
        function loadTeacherOfJobDetailInfo(teacherId)
        {
             $.ajax({
                 type : "post",
                 url : "<%=basePath%>teacher/loadTeacherOfJobDetailInfo.do",
                 data :
                 {
                     teacherId : teacherId
                 },
                 success:function(data){
                     
                     var teacherOfJob = eval("(" + data + ")");
                     var teacherOfJobSelectHtml = '<span style="font-size: 14px; margin-top:7px;"></span>';
                     $.each(teacherOfJob, function(n, value){
                            
                           teacherOfJobSelectHtml += '<span style="font-size: 14px; margin-top:7px;">' + value.gradeName + '&nbsp</span>';
                           
                     });
                     $("#ofJob").html(teacherOfJobSelectHtml);
                 }
             
             });
        
        }
        
        
		//加载教师详细信息
		function loadTeacherDetailInfo(teacherId)
		{
			$.ajax({
				type: "post",
				url: "<%=basePath%>teacher/loadTeacherInfoForStudentDetail.do",
				data:
				{
					teacherId : teacherId
				},
		        success:function(data){
		        	var studentDetail = eval("(" + data + ")");
                    //生日
                    $("#birth").html(studentDetail[0].birth);
		        	//担任职务
		        	$("#ofJob").html(studentDetail[0].ofJob);
		        	//政治面貌
		        	$("#forPolitical").html(studentDetail[0].forPolitical);
		        	//籍贯
		        	$("#nativePlace").html(studentDetail[0].nativePlace);
		        	//身高
		        	$("#height").html(studentDetail[0].height);
		        	//体重
		        	$("#weight").html(studentDetail[0].weight);
		        	//视力
		        	$("#vision").html(studentDetail[0].vision);
		        	//入学时间
		        	$("#instime").html(studentDetail[0].insTime);
		        	//qq
		        	$("#qq").html(studentDetail[0].qq);
		        	//邮箱
		        	$("#email").html(studentDetail[0].email);
		        	//家庭住址
		        	$("#address").html(studentDetail[0].address);
		        	//获奖记录
		        	$("#rewards").html(studentDetail[0].rewards);       
		        }
			});
		}

		//加载进出记录
		function loadInoutList(userId)
		{
			$.ajax({
				type: "post",
				url: "<%=basePath%>inout/loadInoutListForTSDetail.do",
				data:{
						userId : userId
					},
				success: function(data){
					var inoutList = eval("(" + data + ")");
					var appendHtml = '';
					$.each(inoutList, function(n, value) {  
           				appendHtml += '<tr>';
						//卡号
           				appendHtml += '<td width="15%">' + value.code + '</td>';
						//拥有着
           				appendHtml += '<td width="15%">' + value.userName + '</td>';
				
						//进出状态
           				var status = parseInt(value.status);
           				switch(status)
           				{ 
           					case 0 : 
           						appendHtml += '<td width="15%">进</td>';
           						break; 
           					case 1 : 
           						appendHtml += '<td width="15%">进</td>';
           						break; 
           					case 2 : 
           						appendHtml += '<td width="15%">出</td>';
           						break; 
           					default : 
           						appendHtml += '<td width="15%">进</td>';
           						break;
           				}
           				 
						//电池状态
           				var battery = parseInt(value.battery);
           				switch(battery)
           				{ 
           					case 0 : 
           						appendHtml += '<td width="15%">电压偏低</td>';
           						break; 
           					case 1 : 
           						appendHtml += '<td width="15%">电压正常</td>';
           						break; 
           					default : 
           						appendHtml += '<td width="15%">电压偏低</td>';
           						break;
           				}
           				
						//地点
           				appendHtml += '<td width="25%">' + value.positionName + '</td>';
						//创建时间
           				appendHtml += '<td width="15%">' + value.createTime + '</td>';
           				appendHtml += '</tr>';
          			}); 
          			$("#inoutBody").html(appendHtml);
          			reSetIframeHeight();
				},
			});
		}

		//iframe加载相关
		var iframeLoaded = function (iframe) 
		{
		    if (iframe.src.length > 0) 
			{
		        if (!iframe.readyState || iframe.readyState == "complete") 
			    {
		            var bHeight = 
		            iframe.contentWindow.document.body.scrollHeight;
		            var dHeight = 
		            iframe.contentWindow.document.documentElement.scrollHeight;
		            var height = Math.max(bHeight, dHeight);
		            iframe.height = height + 100;
		        }
		    }
		}
		//分页时重新设置 iframe 高度 ； 修改后：iframe.name = iframe.id
		var reSetIframeHeight = function()
		{
		    try 
		    {
		        var oIframe = parent.document.getElementById(window.name);
		        oIframe.height = 100;
		        iframeLoaded(oIframe);
		    }
		    catch (err)
		    {
		        try 
		        {
		        	parent.document.getElementById(window.name).height = 1000;
		        }
		        catch (err2) 
		        {
			    }
		    }
		}
	</script>

	<!-- END JAVASCRIPTS -->

<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body>

<!-- END BODY -->

</html>